# 브라우저 저장 공간

모두 도메인 단위이고, 브라우저 저장 공간이다.

### 쿠키

##### 장점

- 만료일자를 지정할 수 있어 데이터 저장 기간을 설정할 수 있다.

##### 단점

- 쿠키를 설정하면 이후 모든 웹 요청은 쿠키 정보를 포함하여 서버로 전송되기 때문에 트래픽 비용이 크다.
- 쿠키는 개수와 용량의 제한이 있음

### Web Storage

##### 장점

- 저장된 데이터가 클라이언트에 존재할 뿐 서버로 전송은 이루어지지 않는다.
  데이터를 선별해서 전송할 수 있기 때문에 네트워크 트래픽 비용을 줄여준다.
- 갯수의 제한이 없고, 쿠키에 비해 큰 용량을 가진다.

##### 단점

- 저장 기간을 설정할 수 없다.

##### Local

- 직접 삭제하지 않는 한 영구 저장된다.

##### Session

- 세션기간(탭이 열린동안) 내에서만 지속 가능하다.
- 탭마다 session Storage는 따로 배정이 되며, 서로의 영역을 공유하지 않는다.



# 쿠키 / 세션

### 쿠키와 세션을 왜 쓸까?

http는 항상 연결되어있는 것이 아닌 필요할 때마다 요청을 보내고, 응답을 받는 비연결성(Connectionless)이라는 특징을 가진다.

이는 클라이언트가 응답을 받으면 서버는 접속을 끊는다는 것인데, 연결이 끝나면 상태 정보가 유지되지 않는 특성이 있다.

>  로그인을 한 뒤, 다른 도메인으로 이동했다가 기존 사이트로 돌아오면 로그인 정보가 유지되지 않는다는 것.

이렇게 유지되지 않는 로그인 정보를 유지하기 위한 방법이 쿠키와 세션이다.



# CORS

Cross-Origin-Resource-Sharing

원래 보안상의 이유로 기본적으로 브라우저는 도메인이 다른 서버의 리소스를 받는 것을 제안한다.(SOP)

하지만 요즘에는 클라이언트에서 도메인이 다른 서버에서 제공하는 API를 사용하는 일이 많아졌다.

그렇기에 요청 도메인이 서버에 등록된 도메인이라면, 다른 도메인의 서버에서도 응답을 받을 수 있도록 해주는 정책인 CORS가 등장했다.

브라우저에서 출처를 비교한다.

- Simple Request (단순 요청)
  - 조건이 매우 까다로움
- Preflighted Request (사전 요청)
  - 실제 서버 요청 전에 가능한지 options요청으로 먼저 확인하는 것
  - 단순 요청의 조건이 까다롭기 때문에 대부분 사전 요청으로 실행된다.

1. 도메이니 아른 서버에 요청할 경우 헤더의 Origin속성의 나의 도메인도 같이 보내야한다. (브라우저가 자동으로 해준다)
2. 서버에서도 해당 도메인이 허용된 것이라면, **응답값에 Access-Control-Allow-Origin에 해당 도메인을 같이 보내준다**.
3. 응답을 받은 브라우저는 Access-Control-Allow-Origin 헤더가 탭의 출처와 일치하는지 확인한다. Access-Control-Allow-Origin 값이 정확히 출처와 일치하거나, '*' 와일드 카드 연산자를 포함하는 경우 검사가 통과된다.



- 