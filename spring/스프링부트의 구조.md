# 스프링부트의 구조

스프링부트는 각 계층이 양 옆의 계층과 통신하는 구조를 따른다.

계층이란 각자의 역할과 책임이 있는 어떤 소프트웨어의 구성 요소를 의미한다.

각 계층은 서로 소통할 수는 있지만 다른 계층에 직접 간섭하거나 영향을 미치지는 않는다.



[TOC]



### 계층 구조

##### 프레젠테이션 계층

HTTP 요청을 받고 이 요청을 비지니스 계층으로 전송하는 역할

컨트롤러가 보통 프레젠테이션 계층의 역할을 한다.

컨트롤러는 부트 내에 여러 개가 있을 수 있다.



##### 비즈니스 계층

모든 비즈니스 로직을 처리한다.

비즈니스 로직: 서비스를 만들기 위한 로직, 즉 웹 사이트에서 벌어지는 모든 작업, 이를테면 주문 서비스라고 한다면 주문 개수, 가격 등의 데이터를 처리하기 위한 로직, 주문 처리를 하다가 발생하는 예외 처리 로직, 주문을 받거나 취소하는 것 같이 프로세스를 구현하기 위한 로직 등

서비스가 비즈니스 계층의 역할을 한다.



##### 퍼시스턴스 계층

모든 데이터베이스 관련 로직을 처리한다.

이 과정에서 데이터베이스에 접근하는 DAO 객체를 사용할 수도 있다.

DAO는 데이터베이스 계층과 상호작용하기 위한 객체

리포지토리가 퍼시스턴스의 계층 역할을 한다.



### 스프링부트 프로젝트 디렉터리

##### main

실제 코드를 작성하는 공간

프로젝트 실행에 필요한 소스 코드나 리소스 파일은 모두 이 폴더에 들어있다.

- java
- resources



##### test

프로젝트의 소스 코드를 테스트를 할 목적의 코드나 리소스 파일이 들어있다.



##### build.gradle

빌드를 설정하는 파일. 의존성이나 플러그인 설정 등과 같이 빌드에 필요한 설정을 할 때 사용



##### setting.gradle

빌드할 프로젝트의 정보를 설정하는 파일





### 스프링 부트 요청-응답 과정 

![스프링부트_요청응답과정](%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8%EC%9D%98%20%EA%B5%AC%EC%A1%B0.assets/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8_%EC%9A%94%EC%B2%AD%EC%9D%91%EB%8B%B5%EA%B3%BC%EC%A0%95.jpg)

1. 포스트맨에서 톰캣에 /test GET요청

   이 요청은 스프링 부트 내로 이동

2. 이때 스프링 부트의 디스패처 서블릿이라는 친구가 URL을 분석하고, 이 요청을 처리할 수 있는 컨트롤러를 찾는다. 

   TestController가 /test라는 패스에 대한 GET요청을 처리할 수 있는 getAllMembers() 메서드를 가지고 있으므로 디스패처 서블릿은 TestController에게 /test GET 요청을 전달한다.


3. /test GET요청을 처리할 수 있는 getAllMembers() 메서드와 이 요청이 매치.

   getAllmembers() 메서드에서는 비즈니스 계층과 퍼시스턴스 계층을 통하면서 필요한 데이터를 가져온다.

4. 뷰 리졸버는 템플릿 엔진을 사용해 html문서를 만들거나 JSON, XML등의 데이터를 생성
5. 그 결과 members를 return 하고 그 데이터를 포스트맨에서 볼 수 있다.



